<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Will you be my better half?</title>
<style>
  :root{
    --bg:#fff5f8;
    --card:#fff;
    --accent:#ff6b9a;
    --muted:#777;
    --teddy-brown:#d59a6c;
    --teddy-dark:#8b5a36;
  }
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;}
  body{
    background: radial-gradient(circle at 10% 10%, #fff7fb, var(--bg));
    display:flex;align-items:center;justify-content:center;
    padding:24px;
  }

  .stage{
    width:100%;
    max-width:980px;
    background:linear-gradient(180deg,#ffffff, #fffafc);
    border-radius:18px;
    box-shadow:0 10px 30px rgba(10,10,10,0.08);
    padding:28px;
    display:grid;
    grid-template-columns: 1fr 320px;
    gap:20px;
    align-items:center;
    position:relative;
    overflow:hidden;
  }

  @media (max-width:880px){
    .stage{grid-template-columns:1fr; padding:18px;}
  }

  /* teddy area */
  .teddy-wrap{
    display:flex;flex-direction:column;gap:14px;align-items:flex-start;
    transition: transform 400ms cubic-bezier(.2,.9,.2,1), filter 300ms;
    will-change:transform;
  }

  .speech{
    background:linear-gradient(180deg,#fff,#fff0f3);
    border:1px solid rgba(0,0,0,0.06);
    padding:12px 16px;border-radius:12px; font-weight:600;
    box-shadow:0 6px 18px rgba(255,107,154,0.06);
  }

  /* teddy using emoji and CSS body to style */
  .teddy{
    width:220px;height:220px;border-radius:18px;
    display:flex;align-items:center;justify-content:center;
    font-size:120px; user-select:none;
    cursor:pointer;
    transition: transform 500ms cubic-bezier(.2,.9,.2,1), filter 300ms;
    transform-origin:center;
  }

  .teddy-inner{
    display:flex;flex-direction:column;align-items:center;gap:6px;
  }

  /* buttons column */
  .actions{
    display:flex;flex-direction:column;gap:18px;
    align-items:center; padding:18px 10px;
  }
  .buttons{
    display:flex;flex-direction:column;gap:12px;width:100%;
  }

  .btn{
    display:flex;align-items:center;justify-content:center;
    padding:14px 14px;border-radius:12px;font-weight:700;
    border:0;cursor:pointer;font-size:18px;
    transition:transform 220ms ease, width 300ms ease, opacity 200ms;
    box-shadow:0 6px 16px rgba(12,12,12,0.06);
  }
  .btn.yes{
    background:linear-gradient(135deg,#ff7aa6,#ff3d79);
    color:white;
  }
  .btn.no{
    background:#fff;border:1px solid rgba(0,0,0,0.06); color:var(--muted);
  }

  .small{
    transform:scale(0.86);
    opacity:0.85;
  }

  .big{
    transform:scale(1.18);
    box-shadow:0 12px 30px rgba(255,107,154,0.12);
  }

  .muted-note{font-size:13px;color:var(--muted);text-align:center;padding-top:6px}

  /* hearts floating */
  .heart{
    position:absolute;left:50%;transform:translateX(-50%);
    pointer-events:none; font-size:26px; opacity:0;
    animation: floatUp 1800ms ease-out forwards;
  }
  @keyframes floatUp{
    0%{ transform:translate(-50%,10px) scale(.8); opacity:0.0; }
    10%{opacity:1;}
    100%{ transform:translate(-50%,-160px) scale(1.15); opacity:0; }
  }

  /* dancing teddy */
  .dancing{
    animation: dance 900ms ease-in-out infinite;
    filter:drop-shadow(0 20px 30px rgba(255,107,154,0.10));
  }
  @keyframes dance{
    0%{ transform: translateY(0) rotate(-2deg) scale(1); }
    25%{ transform: translateY(-10px) rotate(3deg) scale(1.03); }
    50%{ transform: translateY(0) rotate(-2deg) scale(1); }
    75%{ transform: translateY(-6px) rotate(4deg) scale(1.02); }
    100%{ transform: translateY(0) rotate(-2deg) scale(1); }
  }

  /* full screen teddy overlay */
  .fullscreen{
    position:fixed; inset:0; display:flex;align-items:center;justify-content:center;
    background:linear-gradient(180deg, rgba(255,235,242,0.95), rgba(255,245,250,0.98));
    z-index:9999; flex-direction:column; padding:20px;
    animation: popIn 300ms ease;
  }
  @keyframes popIn{ from{opacity:0;transform:scale(.9)} to{opacity:1;transform:scale(1)} }

  .fullscreen .teddy{font-size:240px; width:auto;height:auto}

  /* message area inside actions column */
  .message-box{
    background:linear-gradient(180deg,#fff,#fff4f7);
    padding:14px;border-radius:12px;border:1px solid rgba(0,0,0,0.04);
    text-align:center; font-weight:600;
  }

  /* footer small */
  .hint{font-size:13px;color:var(--muted); margin-top:6px;text-align:center}

  /* small screen adjustments */
  @media (max-width:480px){
    .teddy{font-size:96px;width:160px;height:160px}
    .fullscreen .teddy{font-size:180px}
    .actions{padding:10px}
    .btn{font-size:16px;padding:12px}
    .stage{padding:14px}
  }

  /* celebration overlay */
  .celebration {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: linear-gradient(45deg, #ff9a9e, #fad0c4, #ffd1ff, #ff9a9e);
    background-size: 400% 400%;
    animation: gradientShift 2s ease infinite;
    z-index: 1000;
  }

  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  .celebration .teddy-bear {
    font-size: 200px;
    animation: celebrate 1s infinite;
  }

  @keyframes celebrate {
    0%, 100% { transform: rotate(-15deg) scale(1); }
    25% { transform: rotate(15deg) scale(1.2); }
    50% { transform: rotate(-10deg) scale(1.1); }
    75% { transform: rotate(10deg) scale(1.3); }
  }

  .celebration .message {
    font-size: 32px;
    color: #d63384;
    margin-top: 20px;
    animation: bounce 1s infinite;
    text-align: center;
    line-height: 1.4;
  }

  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
  }

  .both-yes .btn.no {
    background: linear-gradient(135deg,#ff7aa6,#ff3d79);
    color: white;
  }
</style>
</head>
<body>

<div class="stage" aria-live="polite" id="mainStage">
  <!-- left: teddy and speech -->
  <div class="teddy-wrap" id="teddyWrap">
    <div class="speech" id="speech">Will you be my better half <span style="font-size:0.96em">üíï</span></div>

    <div class="teddy" id="teddy" role="button" aria-label="Teddy Bear">
      <div class="teddy-inner">
        <!-- using emoji so it's portable, easily stylable -->
        <div id="teddyEmoji" style="pointer-events:none;">üß∏</div>
        <div id="teddyFaceText" style="font-size:16px;color:var(--muted)">Click me or choose below</div>
      </div>
    </div>

    <div class="hint">Tap the teddy or choose an option</div>
  </div>

  <!-- right: buttons and message -->
  <div class="actions">
    <div class="message-box" id="messageBox">Choose: <strong>Yes</strong> or <strong>No</strong></div>

    <div class="buttons" id="buttonsContainer">
      <button class="btn yes" id="btnYes">YES! üíñ</button>
      <button class="btn no" id="btnNo">No</button>
    </div>

    <div class="muted-note">Made with ‚ù§Ô∏è ‚Äî playful interaction</div>
  </div>
</div>

<!-- fullscreen container (hidden by default) -->
<div id="fs" style="display:none"></div>

<script>
(function(){
  const btnYes = document.getElementById('btnYes');
  const btnNo = document.getElementById('btnNo');
  const speech = document.getElementById('speech');
  const teddy = document.getElementById('teddy');
  const teddyWrap = document.getElementById('teddyWrap');
  const messageBox = document.getElementById('messageBox');
  const fs = document.getElementById('fs');
  const teddyFaceText = document.getElementById('teddyFaceText');
  const buttonsContainer = document.getElementById('buttonsContainer');
  const mainStage = document.getElementById('mainStage');

  let rejectionCount = 0;
  let celebrated = false;

  const messages = [
    "Will you be my better half? üíï",
    "Oh I guess you clicked the wrong button... üòÖ",
    "I guess you are going to break my heart ü•≤üíî",
    "You are ready to give up on me? Please think again ü•≤üò•"
  ];

  // helper to create heart float
  function spawnHeart() {
    const h = document.createElement('div');
    h.className = 'heart';
    const hearts = ['‚ù§Ô∏è','üíñ','üíò','üíï','ü•∞','üíì', 'üíó', 'üíù'];
    h.textContent = hearts[Math.floor(Math.random()*hearts.length)];
    // random left offset
    const x = (Math.random()*60) + 20; // percent-ish
    h.style.left = x + '%';
    document.body.appendChild(h);
    setTimeout(()=> h.remove(), 2000);
  }

  // celebrate: dancing teddy + hearts + message
  function celebrate() {
    if(celebrated) return;
    celebrated = true;
    
    // Hide main stage
    mainStage.style.display = 'none';
    
    // Show celebration
    showCelebration();
    
    // Start heart rain
    startHeartRain();
  }

  function showCelebration() {
    const celebration = document.createElement('div');
    celebration.className = 'celebration';
    celebration.innerHTML = `
      <div class="teddy-bear dancing">üß∏</div>
      <div class="message">YEAHHH HOOOO!!!<br>You're my Valentine! üéâüíï<br>I know you love meeeeee! üíñ<br>‚ù§Ô∏è üíï üíñ üíù üíó üíò ‚ù§Ô∏è</div>
    `;
    document.body.appendChild(celebration);
  }

  function startHeartRain() {
    setInterval(() => {
      spawnHeart();
    }, 200);
  }

  // when yes clicked or teddy clicked
  btnYes.addEventListener('click', ()=> {
    celebrate();
  });

  teddy.addEventListener('click', ()=> {
    celebrate();
  });

  // function to update visual scale classes
  function updateScales() {
    if(rejectionCount === 0) {
      btnNo.classList.remove('small','big');
      btnYes.classList.remove('small','big');
      teddy.style.transform = 'scale(1)';
      teddyFaceText.textContent = 'Click me or choose below';
    } else if(rejectionCount === 1) {
      // teddy grows a bit; no shrinks
      teddy.style.transform = 'scale(1.08)';
      btnNo.classList.add('small'); btnNo.classList.remove('big');
      btnYes.classList.remove('small'); btnYes.classList.add('big');
      teddyFaceText.textContent = 'Please choose me...';
    } else if(rejectionCount === 2) {
      teddy.style.transform = 'scale(1.14) rotate(-2deg)';
      btnNo.classList.add('small'); btnYes.classList.add('big');
      // add slight wiggle for empathy
      teddyWrap.animate([{transform:'translateY(0)'},{transform:'translateY(-6px)'},{transform:'translateY(0)'}], { duration:450, iterations:2 });
      teddyFaceText.textContent = 'Please don\'t break my heart...';
    } else if(rejectionCount >= 3) {
      btnNo.classList.add('small'); btnYes.classList.add('big');
      teddyFaceText.textContent = 'I\'m begging you...';
    }
  }

  // No button logic progressive
  btnNo.addEventListener('click', ()=>{
    if(celebrated) return; // after celebration, ignore no
    rejectionCount++;
    
    if(rejectionCount === 1) {
      speech.innerHTML = messages[1];
      messageBox.innerHTML = `Oh... <em>wrong button?</em> ‚Äî that's okay.`;
      spawnHeart(); // small heart to soften
    } else if(rejectionCount === 2) {
      speech.innerHTML = messages[2];
      messageBox.innerHTML = `That hurts... but I'm still hopeful.`;
      spawnHeart();
    } else if(rejectionCount === 3) {
      speech.innerHTML = messages[3];
      messageBox.innerHTML = `Please think again ‚Äî I'm trying my best.`;
      // dramatic wiggle
      teddyWrap.animate([{transform:'translateY(0)'},{transform:'translateY(-12px)'},{transform:'translateY(0)'}], { duration:650, iterations:1 });
    } else if(rejectionCount >= 4) {
      // fullscreen teddy takeover and change both buttons to Yes
      openFullscreenTeddy();
    }

    updateScales();
  });

  // When both buttons change to Yes inside fullscreen, clicking either should celebrate.
  function openFullscreenTeddy(){
    // hide existing small UI by overlaying fullscreen
    fs.innerHTML = `
      <div class="fullscreen" id="fullScreenOverlay" role="dialog" aria-modal="true">
        <div class="teddy dancing" id="fsTeddy">üß∏</div>
        <div style="margin-top:16px;font-size:20px;font-weight:700;text-align:center">Please say yes! ü•∫üíï</div>
        <div style="display:flex;gap:12px;margin-top:18px">
          <button class="btn yes" id="fsYes">YES! üíñ</button>
          <button class="btn yes" id="fsYes2">YES! üíñ</button>
        </div>
        <div style="margin-top:12px;color:var(--muted);text-align:center">Click any "Yes" to make me the happiest!</div>
      </div>
    `;
    fs.style.display = 'block';
    
    // add event listeners
    const overlay = document.getElementById('fullScreenOverlay');
    const fsTeddy = document.getElementById('fsTeddy');
    const fsYes = document.getElementById('fsYes');
    const fsYes2 = document.getElementById('fsYes2');

    function endAndCelebrate() {
      // remove overlay
      fs.style.display = 'none';
      // Change both buttons to YES in main interface
      makeBothButtonsYes();
      celebrate();
    }

    fsYes.addEventListener('click', endAndCelebrate);
    fsYes2.addEventListener('click', endAndCelebrate);
    fsTeddy.addEventListener('click', endAndCelebrate);

    // Auto-close after 3 seconds and change both buttons to Yes
    setTimeout(() => {
      if (fs.style.display !== 'none') {
        fs.style.display = 'none';
        makeBothButtonsYes();
      }
    }, 3000);
  }

  function makeBothButtonsYes() {
    // Change NO button to YES
    btnNo.innerHTML = 'YES! üíñ';
    btnNo.onclick = celebrate;
    
    // Add class to make both buttons look the same
    buttonsContainer.classList.add('both-yes');
    
    // Reset message
    speech.innerHTML = "Will you be my better half? üíï";
    messageBox.innerHTML = "Both buttons are YES now! üòä";
    
    // Make both buttons same size
    btnYes.style.transform = 'scale(1.1)';
    btnNo.style.transform = 'scale(1.1)';
  }

  // small accessibility: space/enter trigger on focused teddy
  teddy.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter' || e.key === ' ') celebrate();
  });

  // reset scales on load
  updateScales();

  // subtle pulse to invite click
  setInterval(()=> {
    if(!celebrated && rejectionCount < 3) {
      teddy.animate([{transform:'scale(1)'},{transform:'scale(1.03)'},{transform:'scale(1)'}], {duration:1800, iterations:1});
    }
  }, 3500);

})();
</script>
</body>
</html>